<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Jogo do Moinho</title>
    <style>
        #board {
            position: relative;
            width: 800px; /* Aumentado para 800x800 */
            height: 750px;
            margin: 30px auto;
            background-color: rgb(239, 221, 170);
        }

        .cell {
            position: absolute;
            width: 30px; /* Círculos menores */
            height: 30px;
            border-radius: 50%;
            background-color: rgb(3, 5, 46); /* Não transparente */
            border: 2px solid black; /* Borda preta ao redor dos círculos */
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        .line {
            position: absolute;
            background-color: black;
            height: 4px;
        }
    </style>
</head>
<body>

    <div>
        <label for="numSquares">Número de Quadrados: </label>
        <input type="number" id="numSquares" value="3" min="1" max="10">
        <button onclick="generateBoardFromInput()">Gerar Tabuleiro</button>
    </div>

    <div id="board"></div>

    <script>
        function generateBoardFromInput() {
            const numSquares = document.getElementById('numSquares').value;
            generateBoard(Number(numSquares));
        }

        function generateBoard(numSquares) {
            const boardElement = document.getElementById('board');
            boardElement.innerHTML = ''; // Limpa o tabuleiro anterior

            const boardSize = 2 * numSquares + 1;
            const boardCenter = 400; // Ponto central do tabuleiro (800px / 2)
            const maxRadius = 300; // Raio máximo ajustado para o quadrado maior

            const allPositions = [];

            for (let square = 0; square < numSquares; square++) {
                const radius = maxRadius - (square * (maxRadius / numSquares));
                const positions = calculatePositions(radius);

                positions.forEach((pos, index) => {
                    createCircle(boardElement, boardCenter + pos.x, boardCenter + pos.y, `cell-${square}-${index}`);
                });

                allPositions.push(positions);

                for (let i = 0; i < positions.length; i++) {
                    const nextPos = positions[(i + 1) % positions.length]; 
                    createLine(boardElement, boardCenter + positions[i].x, boardCenter + positions[i].y, boardCenter + nextPos.x, boardCenter + nextPos.y);
                }
            }
        }

        function calculatePositions(radius) {
            return [
                { x: -radius, y: -radius },
                { x: 0, y: -radius },
                { x: radius, y: -radius },
                { x: radius, y: 0 },
                { x: radius, y: radius },
                { x: 0, y: radius },
                { x: -radius, y: radius },
                { x: -radius, y: 0 }
            ];
        }

        function createCircle(boardElement, x, y, id) {
            const cell = document.createElement('div');
            cell.classList.add('cell');
            cell.style.left = `${x - 15}px`; /* Ajuste para círculos menores */
            cell.style.top = `${y - 15}px`; /* Ajuste para círculos menores */
            cell.id = id;
            cell.addEventListener('click', () => handleCellClick(cell));
            boardElement.appendChild(cell);
        }

        function createLine(boardElement, x1, y1, x2, y2) {
            const line = document.createElement('div');
            const length = Math.sqrt((x2 - x1) ** 2 + (y2 - y1) ** 2);
            const angle = Math.atan2(y2 - y1, x2 - x1) * (180 / Math.PI);

            line.classList.add('line');
            line.style.width = `${length}px`;
            line.style.left = `${x1}px`;
            line.style.top = `${y1}px`;
            line.style.transformOrigin = '0 0';  
            line.style.transform = `rotate(${angle}deg)`;
            boardElement.appendChild(line);
        }

        function handleCellClick(cell) {
            console.log(`Célula clicada: ${cell.id}`);
            cell.style.backgroundColor = 'lightblue'; 
        }
    </script>

</body>
</html>
